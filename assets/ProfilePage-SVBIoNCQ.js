import{e as N,s as M,f as L,u as v,r as i,g as k,h as S,j as e,d as F,i as P,B as y,k as C,m as U,I as g,M as b,n as O}from"./index-Dnxv6lHv.js";import{N as q}from"./NoticeCard-DoKJC4h3.js";import{u as A}from"./index.esm-Dni8J906.js";import{c as I,a as w,d as R,o as $}from"./index.esm-CJmJD7oP.js";import"./formatDate-Cl6MRW5r.js";const T=()=>{const a=N(M).favorites,n=N(L),c=6,r=v();return i.useEffect(()=>(r(k({page:1,limit:c,title:null,category:null,sex:null,species:null,sort:null})),()=>{r(S())}),[r]),e.jsx(e.Fragment,{children:a.length!==0?n==null?void 0:n.filter(l=>a.includes(l._id)).map(l=>e.jsx(q,{data:l},l._id)):e.jsx("p",{className:"favorites-no-pets",children:"No favorite pets yet :("})})},V=()=>e.jsx("section",{className:"my-pets-list",children:e.jsx("p",{className:"favorites-no-pets",children:"No my pets yet :("})}),_=({onClose:o,userData:a})=>{var f,u,x;const n=v(),c=F(),r=I({name:w(),email:w().email().required("Email is required"),phone:R()}).required(),{register:l,handleSubmit:p,setValue:s,watch:m,formState:{errors:d}}=A({resolver:$(r),defaultValues:{name:a.name||"",email:a.email||"",phone:a.phone||0}});i.useEffect(()=>{s("name",a.name||""),s("email",a.email||""),s("phone",a.phone||0)},[a,s]);const h=async t=>{try{if(await n(P(t)),c("/profile"),o(),d)return y.error("Something went wrong...")}catch{y.error("Something went wrong, please try again.")}};return e.jsxs("form",{onSubmit:p(h),children:[e.jsxs("div",{className:"wrap-input",children:[e.jsxs("div",{children:[e.jsx("input",{...l("name"),className:"input",value:m("name"),onChange:t=>s("name",t.target.value)}),e.jsx("p",{className:"form-errors",children:(f=d.name)==null?void 0:f.message})]}),e.jsxs("div",{children:[e.jsx("input",{...l("email"),className:"input",value:m("email"),onChange:t=>s("email",t.target.value)}),e.jsx("p",{className:"form-errors",children:(u=d.email)==null?void 0:u.message})]}),e.jsxs("div",{children:[e.jsx("input",{...l("phone"),className:"input",value:m("phone"),onChange:t=>s("phone",Number(t.target.value))}),e.jsx("p",{className:"form-errors",children:(x=d.phone)==null?void 0:x.message})]})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Go to profile"})]})},B=({userData:o,onClose:a})=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"profile-title",children:"Edit information"}),e.jsxs("div",{className:"img-wrap card-info-modal profile",children:[e.jsx("img",{src:o.avatar===""?C:o.avatar,alt:o.name??"User avatar",className:"card-info-modal-img logout profile"}),e.jsx("p",{className:"profile-upload",children:"Upload photo"})]}),e.jsx(_,{onClose:a,userData:o})]}),Q=()=>{const[o,a]=i.useState(!1),[n,c]=i.useState(!1),[r,l]=i.useState(),p=i.useRef(null),s=N(M),m=v(),d=()=>{c(!0),document.body.classList.add("body-scroll-lock")},h=()=>{c(!1),document.body.classList.remove("body-scroll-lock")},f=()=>{a(!0),document.body.classList.add("body-scroll-lock")},u=()=>{a(!1),document.body.classList.remove("body-scroll-lock")},x=t=>{const j=t.target.files;if(j&&j.length>0){const E=j[0];l(E)}};return i.useEffect(()=>{r&&(m(U(r)),p.current&&(p.current.value=""))},[r,m]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"profile-background my",children:[e.jsxs("div",{className:"profile-user-wrapper",children:[e.jsxs("div",{className:"profile-user-wrap",children:[e.jsx("p",{className:"profile-name",children:s.name}),e.jsx(g,{name:"icon-person",width:18,height:18,className:"icon-person"})]}),e.jsx("button",{type:"button",className:"profile-edit",onClick:d,children:e.jsx(g,{name:"edit",width:18,height:18,className:"profile-edit-icon"})})]}),e.jsxs("div",{className:"img-wrap card-info-modal profile",children:[e.jsx("img",{src:s.avatar===""?C:s.avatar,alt:s.name??"User avatar",className:"card-info-modal-img logout profile"}),e.jsxs("form",{children:[e.jsx("input",{id:"inputFile",type:"file",onChange:x,className:"",ref:p}),e.jsx("label",{htmlFor:"inputFile",className:"uploadPhoto",children:e.jsx("p",{className:"profile-upload",children:"Upload photo"})})]})]}),e.jsx("h2",{className:"profile-title",children:"My information"}),e.jsxs("form",{className:"wrap-input profile",children:[e.jsx("input",{type:"text",value:s.name??"NONAME",className:"input",readOnly:!0}),e.jsx("input",{type:"email",value:s.email??"email",className:"input",readOnly:!0}),e.jsx("input",{type:"tel",value:s.phone??"+380",className:"input",readOnly:!0})]}),e.jsxs("div",{className:"profile-user-wrapper addPet",children:[e.jsx("h3",{className:"profile-title",children:"My pets"}),e.jsxs("div",{className:"profile-user-wrap",children:[e.jsx("p",{className:"profile-name",children:"Add pet"}),e.jsx(g,{name:"icon-plus",width:18,height:18,className:"icon-plus"})]})]}),e.jsx(V,{}),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),f()},className:"menu-link register",children:e.jsx("p",{className:"menu-logout",children:"Log out"})})]}),e.jsxs("div",{className:"profile-background",children:[e.jsx("div",{className:"profile-user-wrap my-pets",children:e.jsx("p",{className:"profile-name",children:"My favorite pets"})}),e.jsx(T,{})]}),o&&e.jsx(b,{onClose:u,children:e.jsx(O,{userData:s,onClose:u})}),n&&e.jsx(b,{onClose:h,children:e.jsx(B,{userData:s,onClose:h})})]})};export{Q as default};
