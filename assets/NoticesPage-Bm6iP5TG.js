import{r as l,j as e,I as j,L as z,m as V,n as H,u as K,f as B,o as J,e as $,p as W,q as X,t as Y,v as Z}from"./index-DCc7phdp.js";import{a as O,F as _,P as Q}from"./Pagination-CnGU8QL9.js";import{u as ee,C as se}from"./index.esm-CFPUcMeC.js";import{c as te,a as L,o as ne}from"./index.esm-8ILu_g9w.js";const ae=({imgURL:s,title:c,category:n,popularity:o,name:i,birthday:a,sex:t,species:r,comment:d})=>{const[,h]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"notices-card-top",children:[e.jsxs("div",{children:[e.jsx("img",{src:s,alt:c,className:""}),e.jsx("p",{children:n})]}),e.jsxs("div",{className:"notices-title-wrap",children:[e.jsx("h3",{className:"notices-title",children:c}),e.jsxs("div",{className:"notices-icon-wrap",children:[e.jsx(j,{className:"icon-star",name:"star"}),e.jsx("p",{className:"notices-popularity",children:o})]})]}),e.jsxs("div",{className:"notices-text-wrapper",children:[e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Name"}),e.jsx("p",{children:i})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Birthday"}),e.jsx("p",{children:O(a)})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Sex"}),e.jsx("p",{children:t})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Species"}),e.jsx("p",{children:r})]})]}),e.jsx("p",{className:"notices-text",children:d})]}),e.jsx("div",{className:"notices-button-wrap",children:e.jsxs("button",{type:"button",className:"notices-button-add-to",onClick:()=>h(!0),children:["Add to",e.jsx("div",{className:"notices-add-favorite",children:e.jsx(j,{className:"icon-heart",name:"heart"})})]})}),e.jsx(z,{to:"",children:"Contact"})]})},ce=(s,c,n)=>{l.useEffect(()=>{const o=a=>{a.code==="Escape"&&s(!1)},i=a=>{c.current&&!c.current.contains(a.target)&&s(!1)};return window.addEventListener("keydown",o),document.addEventListener("mousedown",i),document.body.classList.add("body-scroll-lock"),()=>{window.removeEventListener("keydown",o),document.removeEventListener("mousedown",i),document.body.classList.remove("body-scroll-lock")}},[s,c,n])},A=document.querySelector("#root-modal"),oe=({onClose:s,children:c})=>{const n=l.useRef(null);return ce(s,n),A&&V.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsx("div",{className:"modal-container",children:e.jsxs("div",{className:"modal",ref:n,onClick:o=>o.stopPropagation(),children:[e.jsx("button",{className:"modal-btnClose",onClick:()=>s(!1),children:e.jsx(j,{className:"modal-icon",name:"close",width:20,height:20})}),e.jsx("div",{children:c})]})})}),A)},ie=({title:s,imgURL:c,popularity:n,name:o,birthday:i,sex:a,species:t,category:r,comment:d,_id:h})=>{const[u,m]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"notices-card",children:[e.jsxs("div",{className:"notices-card-top",children:[e.jsx("img",{src:c,alt:s,className:"notices-img"}),e.jsxs("div",{className:"notices-title-wrap",children:[e.jsx("h3",{className:"notices-title",children:s}),e.jsxs("div",{className:"notices-icon-wrap",children:[e.jsx(j,{className:"icon-star",name:"star"}),e.jsx("p",{className:"notices-popularity",children:n})]})]}),e.jsxs("div",{className:"notices-text-wrapper",children:[e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Name"}),e.jsx("p",{children:o})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Birthday"}),e.jsx("p",{children:O(i)})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Sex"}),e.jsx("p",{children:a})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Species"}),e.jsx("p",{children:t})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Category"}),e.jsx("p",{children:r})]})]}),e.jsx("p",{className:"notices-text",children:d})]}),e.jsxs("div",{className:"notices-button-wrap",children:[e.jsx("button",{type:"button",className:"notices-button",onClick:()=>m(!0),children:"Read more"}),e.jsx("div",{className:"notices-add-favorite",children:e.jsx(j,{className:"icon-heart",name:"heart"})})]})]}),u&&e.jsx(oe,{onClose:()=>m(!1),children:e.jsx(ae,{title:s,imgURL:c,category:r,popularity:n,name:o,birthday:i,sex:a,species:t,comment:d,_id:h},h)})]})},le=(s,c,n)=>{l.useEffect(()=>{const o=a=>{a.code==="Escape"&&s(!1)},i=a=>{c.current&&!c.current.contains(a.target)&&(n!=null&&n.current)&&!(n!=null&&n.current.contains(a.target))&&s(!1)};return window.addEventListener("keydown",o),document.addEventListener("mousedown",i),()=>{window.removeEventListener("keydown",o),document.removeEventListener("mousedown",i)}},[s,c,n])},F=H.forwardRef(({onSelect:s,onClose:c,data:n},o)=>{const i=r=>{s(r)},a=()=>{s("")},t=l.useRef(null);return le(c,t,o),e.jsx("div",{className:"menu-modal",children:e.jsx("div",{className:"menu-modal-container",children:e.jsxs("ul",{className:"menu-categories-list",ref:t,children:[e.jsx("li",{className:"menu-categories-item",onClick:a,children:"Show all"}),n&&n.map(r=>e.jsx("li",{className:"menu-categories-item",onClick:()=>i(r),children:r},r))]})})})}),re=["sell","free","lost","found"],de=["unknown","female","male","multiple"],me=["dog","cat","monkey","bird","snake","turtle","lizard","frog","fish","ants","bees","butterfly","spider","scorpion"],R=({placeholder:s,setSearchQuery:c})=>{const n=te({category:L(),sex:L(),species:L()}).required(),{handleSubmit:o,control:i,setValue:a}=ee({resolver:ne(n)}),t=K(),r=l.useRef(null),d=l.useRef(null),h=l.useRef(null),u=l.useRef(null),[m,b]=B(),[N,w]=l.useState(m.get("category")??""),[f,C]=l.useState(m.get("sex")??""),[v,y]=l.useState(m.get("species")??""),[S,g]=l.useState(!1),[M,k]=l.useState(!1),[D,P]=l.useState(!1),I=x=>{c(p=>({...p,...x})),G(x),t(J(1))},U=()=>{s==="Category"?g(!S):s==="By gender"?k(!M):P(!D)},E=x=>{const p={};s==="Category"?(w(x),p.category=x||void 0):s==="By gender"?(C(x),p.sex=x||void 0):(y(x),p.species=x||void 0),g(!1),k(!1),P(!1),G(p),o(I)()},G=x=>{const p=new URLSearchParams(m);Object.entries(x).forEach(([q,T])=>{T?p.set(q,T):p.delete(q)}),b(p)};return l.useEffect(()=>{w(m.get("category")??""),C(m.get("sex")??""),y(m.get("species")??"")},[m]),l.useEffect(()=>{a("category",N||""),a("sex",f||""),a("species",v||"")},[N,f,v,a]),e.jsx("form",{onSubmit:o(I),ref:r,children:e.jsxs("div",{className:`find-form-wrap ${s==="Category"||s==="By gender"?"category":s==="By type"?"type":""}`,children:[e.jsx(se,{name:s==="Category"?"category":s==="By gender"?"sex":"species",control:i,render:({field:x})=>e.jsx("input",{...x,className:"input find-input",placeholder:s,value:s==="Category"?N:s==="By gender"?f:v})}),e.jsx("button",{type:"button",className:"find-form-button",onClick:U,ref:s==="Category"?d:s==="By gender"?h:u,children:e.jsx("div",{className:"find-form-icon",children:e.jsx(j,{name:"chevron-down",className:"icon-search"})})}),S&&e.jsx(F,{onSelect:E,onClose:()=>g(!1),ref:d,data:re}),M&&e.jsx(F,{onSelect:E,onClose:()=>k(!1),ref:h,data:de}),D&&e.jsx(F,{onSelect:E,onClose:()=>P(!1),ref:u,data:me})]})})},xe=({setSearchQuery:s,text:c,isActive:n,onClick:o})=>{const i=()=>{s(a=>({...a,sort:n?"":c})),o()};return e.jsx("div",{className:"button-wrap",children:e.jsxs("button",{type:"submit",className:`sort-button ${n?"cross":""}`,onClick:i,children:[c,n&&e.jsx(j,{className:"icon-cross",name:"close"})]})})},ue=({setSearchQuery:s})=>{const[c,n]=B(),o=c.get("sort"),i=a=>{const t=o===a?"":a;s(d=>({...d,sort:t}));const r=new URLSearchParams(c);t?r.set("sort",t):r.delete("sort"),n(r)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"notices-form-wrap",children:[e.jsxs("div",{className:"notices-form-top",children:[e.jsx(_,{setSearchQuery:s,placeholder:"Search"}),e.jsx(R,{setSearchQuery:s,placeholder:"Category"}),e.jsx(R,{setSearchQuery:s,placeholder:"By gender"}),e.jsx(R,{setSearchQuery:s,placeholder:"By type"})]}),e.jsx("div",{className:"notices-stroke"}),e.jsx("div",{className:"sort-button-wrap",children:["Popular","Unpopular","Cheap","Expensive"].map(a=>e.jsx(xe,{setSearchQuery:s,text:a,isActive:o===a.toLowerCase(),onClick:()=>i(a.toLowerCase())},a))})]})})},Ne=()=>{const s=$(W),c=6,[n,o]=B();l.useEffect(()=>{n.has("page")||o({page:"1"})},[n,o]);const i=Number(n.get("page"))||1,a=$(X),[t,r]=l.useState({title:n.get("title")||null,category:n.get("category")||null,sex:n.get("sex")||null,species:n.get("species")||null,sort:n.get("sort")||null}),d=K();l.useEffect(()=>{const u={page:i,limit:c,title:t!=null&&t.title?t.title:null,category:t!=null&&t.category?t.category:null,sex:t!=null&&t.sex?t.sex:null,species:t!=null&&t.species?t.species:null,sort:t!=null&&t.sort?t==null?void 0:t.sort:null};d(Y()),d(Z(u))},[i,d,t]);const h=u=>{o({page:String(u),...t.title&&{title:String(t.title)},...t.category&&{category:String(t.category)},...t.sex&&{sex:String(t.sex)},...t.species&&{species:String(t.species)}})};return e.jsxs("div",{className:"notices-container",children:[e.jsxs("div",{className:"notices-main-wrap",children:[e.jsx("h2",{className:"notices-main-title",children:"Find your favorite pet"}),e.jsx(ue,{setSearchQuery:r})]}),e.jsx("div",{className:"news-cards notices-cards",children:s&&s.length>0?s.map(({name:u,title:m,imgURL:b,species:N,birthday:w,sex:f,category:C,comment:v,popularity:y,price:S,_id:g})=>e.jsx(ie,{name:u,title:m,imgURL:b,species:N,birthday:w,sex:f,category:C,comment:v,popularity:y,price:S,_id:g},g)):e.jsx("p",{children:"There are news yet"})}),a&&e.jsx(Q,{totalItems:a,currentPage:i,onPageChange:h})]})};export{Ne as default};
