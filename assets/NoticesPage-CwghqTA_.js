import{j as e,I as S,r,m as O,u as M,f as D,n as T,e as L,o as V,p as A,q as H,t as J,v as W,w as X,x as Y}from"./index-B82S41_2.js";import{a as Z,F as _,P as Q}from"./Pagination-C3guwyoZ.js";import{u as ee,C as se}from"./index.esm-CGGK3-oS.js";import{c as te,a as E,o as ne}from"./index.esm-Bhnx5wuY.js";const ae=({title:t,imgURL:i,popularity:n,name:o,birthday:l,sex:c,species:s,category:a,comment:m})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"notices-card",children:[e.jsxs("div",{className:"notices-card-top",children:[e.jsx("img",{src:i,alt:t,className:"notices-img"}),e.jsxs("div",{className:"notices-title-wrap",children:[e.jsx("h3",{className:"notices-title",children:t}),e.jsxs("div",{className:"notices-icon-wrap",children:[e.jsx(S,{className:"icon-star",name:"star"}),e.jsx("p",{className:"notices-popularity",children:n})]})]}),e.jsxs("div",{className:"notices-text-wrapper",children:[e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Name"}),e.jsx("p",{children:o})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Birthday"}),e.jsx("p",{children:Z(l)})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Sex"}),e.jsx("p",{children:c})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Species"}),e.jsx("p",{children:s})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Category"}),e.jsx("p",{children:a})]})]}),e.jsx("p",{className:"notices-text",children:m})]}),e.jsxs("div",{className:"notices-button-wrap",children:[e.jsx("button",{type:"button",className:"notices-button",children:"Read more"}),e.jsx("div",{className:"notices-add-favorite",children:e.jsx(S,{className:"icon-heart",name:"heart"})})]})]})}),ce=(t,i,n)=>{r.useEffect(()=>{const o=c=>{c.code==="Escape"&&t(!1)},l=c=>{i.current&&!i.current.contains(c.target)&&(n!=null&&n.current)&&!(n!=null&&n.current.contains(c.target))&&t(!1)};return window.addEventListener("keydown",o),document.addEventListener("mousedown",l),()=>{window.removeEventListener("keydown",o),document.removeEventListener("mousedown",l)}},[t,i,n])},R=O.forwardRef(({onSelect:t,onClose:i,data:n},o)=>{const l=a=>{t(a)},c=()=>{t("")},s=r.useRef(null);return ce(i,s,o),e.jsx("div",{className:"menu-modal",children:e.jsx("div",{className:"menu-modal-container",children:e.jsxs("ul",{className:"menu-categories-list",ref:s,children:[e.jsx("li",{className:"menu-categories-item",onClick:c,children:"Show all"}),n&&n.map(a=>e.jsx("li",{className:"menu-categories-item",onClick:()=>l(a),children:a},a))]})})})}),oe=["sell","free","lost","found"],ie=["unknown","female","male","multiple"],re=["dog","cat","monkey","bird","snake","turtle","lizard","frog","fish","ants","bees","butterfly","spider","scorpion"],B=({placeholder:t,setSearchQuery:i})=>{const n=te({category:E(),sex:E(),species:E()}).required(),{handleSubmit:o,control:l,setValue:c}=ee({resolver:ne(n)}),s=M(),a=r.useRef(null),m=r.useRef(null),p=r.useRef(null),u=r.useRef(null),[x,y]=D(),[j,N]=r.useState(x.get("category")??""),[h,w]=r.useState(x.get("sex")??""),[f,v]=r.useState(x.get("species")??""),[C,P]=r.useState(!1),[G,b]=r.useState(!1),[I,F]=r.useState(!1),$=d=>{i(g=>({...g,...d})),q(d),s(T(1))},K=()=>{t==="Category"?P(!C):t==="By gender"?b(!G):F(!I)},k=d=>{const g={};t==="Category"?(N(d),g.category=d||void 0):t==="By gender"?(w(d),g.sex=d||void 0):(v(d),g.species=d||void 0),P(!1),b(!1),F(!1),q(g),o($)()},q=d=>{const g=new URLSearchParams(x);Object.entries(d).forEach(([U,z])=>{z?g.set(U,z):g.delete(U)}),y(g)};return r.useEffect(()=>{N(x.get("category")??""),w(x.get("sex")??""),v(x.get("species")??"")},[x]),r.useEffect(()=>{c("category",j||""),c("sex",h||""),c("species",f||"")},[j,h,f,c]),e.jsx("form",{onSubmit:o($),ref:a,children:e.jsxs("div",{className:`find-form-wrap ${t==="Category"||t==="By gender"?"category":t==="By type"?"type":""}`,children:[e.jsx(se,{name:t==="Category"?"category":t==="By gender"?"sex":"species",control:l,render:({field:d})=>e.jsx("input",{...d,className:"input find-input",placeholder:t,value:t==="Category"?j:t==="By gender"?h:f})}),e.jsx("button",{type:"button",className:"find-form-button",onClick:K,ref:t==="Category"?m:t==="By gender"?p:u,children:e.jsx("div",{className:"find-form-icon",children:e.jsx(S,{name:"chevron-down",className:"icon-search"})})}),C&&e.jsx(R,{onSelect:k,onClose:()=>P(!1),ref:m,data:oe}),G&&e.jsx(R,{onSelect:k,onClose:()=>b(!1),ref:p,data:ie}),I&&e.jsx(R,{onSelect:k,onClose:()=>F(!1),ref:u,data:re})]})})},le=({setSearchQuery:t,text:i,isActive:n,onClick:o})=>{const l=()=>{t(c=>({...c,sort:n?"":i})),o()};return e.jsx("div",{className:"button-wrap",children:e.jsxs("button",{type:"submit",className:`sort-button ${n?"cross":""}`,onClick:l,children:[i,n&&e.jsx(S,{className:"icon-cross",name:"close"})]})})},de=({setSearchQuery:t})=>{const i=M(),n=L(V),[o,l]=D(),c=o.get("sort"),s=a=>{const m=c===a?"":a;t(u=>({...u,sort:m}));const p=new URLSearchParams(o);m?p.set("sort",m):p.delete("sort"),l(p),i(n===a?A():H(a))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"notices-form-wrap",children:[e.jsxs("div",{className:"notices-form-top",children:[e.jsx(_,{setSearchQuery:t,placeholder:"Search"}),e.jsx(B,{setSearchQuery:t,placeholder:"Category"}),e.jsx(B,{setSearchQuery:t,placeholder:"By gender"}),e.jsx(B,{setSearchQuery:t,placeholder:"By type"})]}),e.jsx("div",{className:"notices-stroke"}),e.jsx("div",{className:"sort-button-wrap",children:["Popular","Unpopular","Cheap","Expensive"].map(a=>e.jsx(le,{setSearchQuery:t,text:a,isActive:c===a.toLowerCase(),onClick:()=>s(a.toLowerCase())},a))})]})})},pe=()=>{const t=L(J),i=6,[n,o]=D();r.useEffect(()=>{n.has("page")||o({page:"1"})},[n,o]);const l=Number(n.get("page"))||1,c=L(W),[s,a]=r.useState({title:n.get("title")||null,category:n.get("category")||null,sex:n.get("sex")||null,species:n.get("species")||null,sort:n.get("sort")||null}),m=M();r.useEffect(()=>{const u={page:l,limit:i,title:s!=null&&s.title?s.title:null,category:s!=null&&s.category?s.category:null,sex:s!=null&&s.sex?s.sex:null,species:s!=null&&s.species?s.species:null,sort:s!=null&&s.sort?s==null?void 0:s.sort:null};m(X()),m(Y(u))},[l,m,s]);const p=u=>{o({page:String(u),...s.title&&{title:String(s.title)},...s.category&&{category:String(s.category)},...s.sex&&{sex:String(s.sex)},...s.species&&{species:String(s.species)}})};return e.jsxs("div",{className:"notices-container",children:[e.jsxs("div",{className:"notices-main-wrap",children:[e.jsx("h2",{className:"notices-main-title",children:"Find your favorite pet"}),e.jsx(de,{setSearchQuery:a})]}),e.jsx("div",{className:"news-cards notices-cards",children:t&&t.length>0?t.map(({name:u,title:x,imgURL:y,species:j,birthday:N,sex:h,category:w,comment:f,popularity:v,price:C})=>e.jsx(ae,{name:u,title:x,imgURL:y,species:j,birthday:N,sex:h,category:w,comment:f,popularity:v,price:C},x)):e.jsx("p",{children:"There are news yet"})}),e.jsx(Q,{totalItems:c,currentPage:l,onPageChange:p})]})};export{pe as default};
