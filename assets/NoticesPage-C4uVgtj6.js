import{e as P,m as _,j as e,I as p,L as W,r as l,n as H,N as z,u as B,o as J,p as X,q as Y,f as I,t as Z,v as Q,w as ee,x as se,y as te}from"./index-HMvsQzhQ.js";import{a as K,F as ae,P as ne}from"./Pagination-B-u1qIzq.js";import{u as ce,C as oe}from"./index.esm-CHgMtSlT.js";import{c as ie,a as F,o as le}from"./index.esm-DiLdyo8Y.js";const re=({data:s,addToFavorite:c,deleteFavorite:a})=>{const{title:o,imgURL:i,popularity:n,name:t,birthday:d,sex:u,species:j,category:r,comment:m,_id:g}=s,f=P(_).favorites;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"notices-card-top",children:[e.jsxs("div",{className:"img-wrap card-info-modal",children:[e.jsx("img",{src:i,alt:o,className:"card-info-modal-img"}),e.jsx("p",{className:"card-info-modal-category",children:r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"notices-title card-info-modal",children:o}),e.jsxs("div",{className:"notices-icon-wrap card-info-modal",children:[e.jsx(p,{className:"icon-star",name:"star"}),e.jsx("p",{className:"notices-popularity",children:n})]})]}),e.jsxs("div",{className:"notices-text-wrapper card-info-modal",children:[e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Name"}),e.jsx("p",{children:t})]}),e.jsxs("div",{className:"notices-text-wrap card-info-modal",children:[e.jsx("p",{className:"notices-title-text",children:"Birthday"}),e.jsx("p",{children:K(d)})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Sex"}),e.jsx("p",{children:u})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Species"}),e.jsx("p",{children:j})]})]}),e.jsx("p",{className:"notices-text card-info-modal",children:m})]}),e.jsxs("div",{className:"card-info-modal-wrap",children:[g&&f.includes(g)?e.jsxs("div",{className:"notices-button card-info-modal",onClick:a,children:[e.jsx("button",{type:"button",className:"card-info-modal-add-to",children:"Delete"}),e.jsx(p,{className:"icon-heart card-info-modal",name:"icon-heart-circle"})]}):e.jsxs("div",{className:"notices-button card-info-modal",onClick:c,children:[e.jsx("button",{type:"button",className:"card-info-modal-add-to",children:"Add to"}),e.jsx(p,{className:"icon-heart card-info-modal",name:"heart"})]}),e.jsx(W,{to:"",className:"card-info-modal-contact",children:"Contact"})]})]})},de=(s,c,a)=>{l.useEffect(()=>{const o=n=>{n.code==="Escape"&&s(!1)},i=n=>{c.current&&a.current&&!c.current.contains(n.target)&&a.current.contains(n.target)&&s(!1)};return window.addEventListener("keydown",o),document.addEventListener("mousedown",i),document.body.classList.add("body-scroll-lock"),()=>{window.removeEventListener("keydown",o),document.removeEventListener("mousedown",i),document.body.classList.remove("body-scroll-lock")}},[s,c,a])},A=document.querySelector("#root-modal"),O=({onClose:s,children:c})=>{const a=l.useRef(null),o=l.useRef(null);return de(s,a,o),A&&H.createPortal(e.jsx("div",{className:"modal-backdrop",ref:o,children:e.jsx("div",{className:"modal-container",children:e.jsxs("div",{className:"modal",ref:a,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{className:"modal-btnClose",onClick:()=>s(!1),children:e.jsx(p,{className:"modal-icon",name:"close",width:18,height:18})}),e.jsx("div",{children:c})]})})}),A)},me=({data:s})=>{const{title:c,imgURL:a}=s;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"notices-card-top",children:[e.jsx("div",{className:"img-wrap card-info-modal",children:e.jsx("img",{src:a,alt:c,className:"card-info-modal-img"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"unauth-info-modal-title",children:"Attention"}),e.jsx("p",{className:"unauth-info-modal-text",children:"We would like to remind you that certain functionality is available only to authorized users.If you have an account, please log in with your credentials. If you do not already have an account, you must register to access these features."})]})]}),e.jsx("div",{className:"card-info-modal-wrap",children:e.jsxs("ul",{className:"header-auth-list",children:[e.jsx("li",{className:"header-link login",children:e.jsx(z,{to:"/login",children:e.jsx("p",{className:"menu-login",children:"Log in"})})}),e.jsx("li",{className:"header-link register",children:e.jsx(z,{to:"/register",children:e.jsx("p",{className:"menu-register",children:"Registration"})})})]})})]})},xe=({data:s})=>{const{title:c,imgURL:a,popularity:o,name:i,birthday:n,sex:t,species:d,category:u,comment:j,_id:r}=s,[m,g]=l.useState(!1),[v,f]=l.useState(!1),N=P(_),b=N.favorites,y=B(),k=()=>{g(!0),document.body.classList.add("body-scroll-lock")},L=()=>{g(!1),document.body.classList.remove("body-scroll-lock")},C=()=>{f(!1),m||document.body.classList.remove("body-scroll-lock")},S=()=>{N.email&&r?y(J(r)):f(!0)},w=()=>{N.email&&r?y(X(r)):f(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"notices-card",children:[e.jsxs("div",{className:"notices-card-top",children:[e.jsx("img",{src:a,alt:c,className:"notices-img"}),e.jsxs("div",{className:"notices-title-wrap",children:[e.jsx("h3",{className:"notices-title",children:c}),e.jsxs("div",{className:"notices-icon-wrap",children:[e.jsx(p,{className:"icon-star",name:"star"}),e.jsx("p",{className:"notices-popularity",children:o})]})]}),e.jsxs("div",{className:"notices-text-wrapper",children:[e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Name"}),e.jsx("p",{children:i})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Birthday"}),e.jsx("p",{children:K(n)})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Sex"}),e.jsx("p",{children:t})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Species"}),e.jsx("p",{children:d})]}),e.jsxs("div",{className:"notices-text-wrap",children:[e.jsx("p",{className:"notices-title-text",children:"Category"}),e.jsx("p",{children:u})]})]}),e.jsx("p",{className:"notices-text",children:j})]}),e.jsxs("div",{className:"notices-button-wrap",children:[e.jsx("button",{type:"button",className:"notices-button",onClick:k,children:"Read more"}),r&&b.includes(r)?e.jsx("div",{className:"notices-add-favorite",onClick:w,children:e.jsx(p,{className:"icon-heart",name:"icon-heart-circle"})}):e.jsx("div",{className:"notices-add-favorite",onClick:S,children:e.jsx(p,{className:"icon-heart",name:"heart"})})]})]}),m&&e.jsx(O,{onClose:L,isSecondary:!1,children:e.jsx(re,{data:s,addToFavorite:S,deleteFavorite:w},r)}),v&&e.jsx(O,{onClose:C,isSecondary:!1,children:e.jsx(me,{data:s},r)})]})},ue=(s,c,a)=>{l.useEffect(()=>{const o=n=>{n.code==="Escape"&&s(!1)},i=n=>{c.current&&!c.current.contains(n.target)&&(a!=null&&a.current)&&!(a!=null&&a.current.contains(n.target))&&s(!1)};return window.addEventListener("keydown",o),document.addEventListener("mousedown",i),()=>{window.removeEventListener("keydown",o),document.removeEventListener("mousedown",i)}},[s,c,a])},M=Y.forwardRef(({onSelect:s,onClose:c,data:a},o)=>{const i=d=>{s(d)},n=()=>{s("")},t=l.useRef(null);return ue(c,t,o),e.jsx("div",{className:"menu-modal",children:e.jsx("div",{className:"menu-modal-container",children:e.jsxs("ul",{className:"menu-categories-list",ref:t,children:[e.jsx("li",{className:"menu-categories-item",onClick:n,children:"Show all"}),a&&a.map(d=>e.jsx("li",{className:"menu-categories-item",onClick:()=>i(d),children:d},d))]})})})}),he=["sell","free","lost","found"],pe=["unknown","female","male","multiple"],je=["dog","cat","monkey","bird","snake","turtle","lizard","frog","fish","ants","bees","butterfly","spider","scorpion"],U=({placeholder:s,setSearchQuery:c})=>{const a=ie({category:F(),sex:F(),species:F()}).required(),{handleSubmit:o,control:i,setValue:n}=ce({resolver:le(a)}),t=B(),d=l.useRef(null),u=l.useRef(null),j=l.useRef(null),r=l.useRef(null),[m,g]=I(),[v,f]=l.useState(m.get("category")??""),[N,b]=l.useState(m.get("sex")??""),[y,k]=l.useState(m.get("species")??""),[L,C]=l.useState(!1),[S,w]=l.useState(!1),[D,E]=l.useState(!1),G=x=>{c(h=>({...h,...x})),q(x),t(Z(1))},V=()=>{s==="Category"?C(!L):s==="By gender"?w(!S):E(!D)},R=x=>{const h={};s==="Category"?(f(x),h.category=x||void 0):s==="By gender"?(b(x),h.sex=x||void 0):(k(x),h.species=x||void 0),C(!1),w(!1),E(!1),q(h),o(G)()},q=x=>{const h=new URLSearchParams(m);Object.entries(x).forEach(([T,$])=>{$?h.set(T,$):h.delete(T)}),g(h)};return l.useEffect(()=>{f(m.get("category")??""),b(m.get("sex")??""),k(m.get("species")??"")},[m]),l.useEffect(()=>{n("category",v||""),n("sex",N||""),n("species",y||"")},[v,N,y,n]),e.jsx("form",{onSubmit:o(G),ref:d,className:"form",children:e.jsxs("div",{className:`find-form-wrap ${s==="Category"||s==="By gender"?"category":s==="By type"?"type":""}`,children:[e.jsx(oe,{name:s==="Category"?"category":s==="By gender"?"sex":"species",control:i,render:({field:x})=>e.jsx("input",{...x,className:"input find-input",placeholder:s,value:s==="Category"?v:s==="By gender"?N:y})}),e.jsx("button",{type:"button",className:"find-form-button",onClick:V,ref:s==="Category"?u:s==="By gender"?j:r,children:e.jsx("div",{className:"find-form-icon",children:e.jsx(p,{name:"chevron-down",className:"icon-search"})})}),L&&e.jsx(M,{onSelect:R,onClose:()=>C(!1),ref:u,data:he}),S&&e.jsx(M,{onSelect:R,onClose:()=>w(!1),ref:j,data:pe}),D&&e.jsx(M,{onSelect:R,onClose:()=>E(!1),ref:r,data:je})]})})},fe=({setSearchQuery:s,text:c,isActive:a,onClick:o})=>{const i=()=>{s(n=>({...n,sort:a?"":c})),o()};return e.jsx("div",{className:"button-wrap",children:e.jsxs("button",{type:"submit",className:`sort-button ${a?"cross":""}`,onClick:i,children:[c,a&&e.jsx(p,{className:"icon-cross",name:"close"})]})})},ge=({setSearchQuery:s})=>{const[c,a]=I(),o=c.get("sort"),i=n=>{const t=o===n?"":n;s(u=>({...u,sort:t}));const d=new URLSearchParams(c);t?d.set("sort",t):d.delete("sort"),a(d)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"notices-form-wrap",children:[e.jsxs("div",{className:"notices-form-top",children:[e.jsx(ae,{setSearchQuery:s,placeholder:"Search"}),e.jsx(U,{setSearchQuery:s,placeholder:"Category"}),e.jsx(U,{setSearchQuery:s,placeholder:"By gender"}),e.jsx(U,{setSearchQuery:s,placeholder:"By type"})]}),e.jsx("div",{className:"notices-stroke"}),e.jsx("div",{className:"sort-button-wrap",children:["Popular","Unpopular","Cheap","Expensive"].map(n=>e.jsx(fe,{setSearchQuery:s,text:n,isActive:o===n.toLowerCase(),onClick:()=>i(n.toLowerCase())},n))})]})})},Ce=()=>{const s=P(Q),c=6,[a,o]=I();l.useEffect(()=>{a.has("page")||o({page:"1"})},[a,o]);const i=Number(a.get("page"))||1,n=P(ee),[t,d]=l.useState({title:a.get("title")||null,category:a.get("category")||null,sex:a.get("sex")||null,species:a.get("species")||null,sort:a.get("sort")||null}),u=B();l.useEffect(()=>{const r={page:i,limit:c,title:t!=null&&t.title?t.title:null,category:t!=null&&t.category?t.category:null,sex:t!=null&&t.sex?t.sex:null,species:t!=null&&t.species?t.species:null,sort:t!=null&&t.sort?t==null?void 0:t.sort:null};u(se()),u(te(r))},[i,u,t]);const j=r=>{o({page:String(r),...t.title&&{title:String(t.title)},...t.category&&{category:String(t.category)},...t.sex&&{sex:String(t.sex)},...t.species&&{species:String(t.species)}})};return e.jsxs("div",{className:"notices-container",children:[e.jsxs("div",{className:"notices-main-wrap",children:[e.jsx("h2",{className:"notices-main-title",children:"Find your favorite pet"}),e.jsx(ge,{setSearchQuery:d})]}),e.jsx("div",{className:"news-cards notices-cards",children:s&&s.length>0?s.map(r=>e.jsx(xe,{data:r},r._id)):e.jsx("p",{children:"There are news yet"})}),n&&e.jsx(ne,{totalItems:n,currentPage:i,onPageChange:j})]})};export{Ce as default};
